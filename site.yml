---
# site.yml
# ðŸ§© Playbook maestro para configurar almacenamiento persistente en Flatcar + K3s
# Incluye: LVM, NFS, Longhorn (con etiquetado de nodos integrado)

- name: ðŸ“¦ Preparar disco de almacenamiento con LVM y exportar NFS
  hosts: storage
  become: true
  gather_facts: false
  roles:
    - role: storage_setup

- name: ðŸ’¾ Preparar nodos Longhorn (formatear y montar /dev/vdb)
  hosts: workers
  become: true
  gather_facts: false
  roles:
    - role: longhorn_worker

- name: ðŸš€ Instalar Longhorn (incluye etiquetado de nodos desde master1)
  import_playbook: playbooks/install_longhorn.yml