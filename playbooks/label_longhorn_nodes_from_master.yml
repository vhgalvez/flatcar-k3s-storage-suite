---
# Ruta: playbooks/label_longhorn_nodes_from_master.yml
# üè∑Ô∏è Etiqueta nodos worker para habilitarlos como nodos de Longhorn
# Ejecutar este playbook desde el nodo master1 para aplicar etiquetas en los workers

- name: üè∑Ô∏è Etiquetar nodos worker con longhorn-node=true desde master1
  hosts: master1
  become: true
  gather_facts: false

  tasks:
    - name: üè∑Ô∏è worker1 - Etiqueta como longhorn-node
      raw: |
        export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
        k3s kubectl label node worker1.cefaslocalserver.com longhorn-node=true --overwrite

    - name: üè∑Ô∏è worker2 - Etiqueta como longhorn-node
      raw: |
        export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
        k3s kubectl label node worker2.cefaslocalserver.com longhorn-node=true --overwrite

    - name: üè∑Ô∏è worker3 - Etiqueta como longhorn-node
      raw: |
        export KUBECONFIG=/etc/rancher/k3s/k3s.yaml
        k3s kubectl label node worker3.cefaslocalserver.com longhorn-node=true --overwrite
