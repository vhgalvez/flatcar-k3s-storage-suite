# site.yml
---
- name: ğŸ”§ 1ï¸âƒ£ Preparar nodo controlador (kubectl + helm + kubeconfig)
  import_playbook: playbooks/01_prepare_controller.yml

- name: ğŸ’¾ 2ï¸âƒ£ Preparar almacenamiento (LVM + NFS + export)
  import_playbook: playbooks/02_prepare_storage.yml

- name: ğŸ§¹ 3ï¸âƒ£ Eliminar ServiceAccount 'default' (opcional)
  import_playbook: playbooks/03_cleanup_default_sa.yml

- name: ğŸ” 4ï¸âƒ£ Generar token JWT en master con permisos correctos
  import_playbook: playbooks/04_generate_token.yml

- name: ğŸ“¥ 5ï¸âƒ£ Copiar token JWT al nodo controlador
  import_playbook: playbooks/05_copy_token.yml

- name: ğŸš€ 6ï¸âƒ£ Desplegar y validar Longhorn
  import_playbook: playbooks/06_deploy_longhorn.yml

- name: âœ… 7ï¸âƒ£ Validar clÃºster completo y estado de Longhorn
  import_playbook: playbooks/07_validate_cluster.yml
